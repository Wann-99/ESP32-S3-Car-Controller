# ESP32-S3智能小车WiFi配网说明

## 功能概述

ESP32-S3智能小车现在支持WiFi配网功能，无需修改代码即可连接到新的WiFi网络。

## 配网方式

### 方式一：自动配网模式（推荐）

1. **首次使用或WiFi连接失败时**：
   - 设备会自动进入配网模式
   - LED灯会快速闪烁提示进入配网状态
   - 串口会显示配网提示信息

2. **连接配网热点**：
   - 使用手机或电脑搜索WiFi热点：`ESP32-S3-Car-Config`
   - 密码：`12345678`

3. **配置WiFi**：
   - 连接热点后，浏览器会自动弹出配网页面
   - 如果没有自动弹出，请手动访问：`http://192.168.4.1`
   - 选择您要连接的WiFi网络
   - 输入WiFi密码
   - 点击"保存"按钮

4. **配网完成**：
   - 设备会自动重启并连接到新的WiFi网络
   - LED灯会常亮2秒表示连接成功
   - 串口会显示连接成功信息和IP地址

### 方式二：按钮重置配网

1. **按住Boot按钮**：
   - 在设备启动时按住ESP32-S3开发板上的Boot按钮（GPIO0）
   - 保持按住直到看到串口输出"Config button pressed"

2. **进入配网模式**：
   - 设备会清除之前保存的WiFi配置
   - 自动进入配网模式
   - 按照方式一的步骤3-4完成配网

### 方式三：串口命令重置

1. **打开串口监视器**：
   - 波特率：9600
   - 连接到ESP32-S3设备

2. **发送重置命令**：
   ```
   reset_wifi
   ```

3. **设备响应**：
   - 设备会清除WiFi配置并重启
   - 自动进入配网模式
   - 按照方式一的步骤2-4完成配网

## 串口命令

设备支持以下串口命令：

| 命令 | 功能 |
|------|------|
| `reset_wifi` | 重置WiFi配置，重启进入配网模式 |
| `wifi_status` | 查看当前WiFi连接状态 |
| `help` | 显示帮助信息 |

## 配网状态指示

### LED指示
- **快速闪烁**：配网模式
- **常亮2秒**：WiFi连接成功
- **正常工作**：根据设备状态显示

### 串口信息
- 配网模式启动提示
- WiFi连接状态
- IP地址信息
- 错误信息

## 故障排除

### 配网失败
1. 确认WiFi密码正确
2. 确认WiFi网络支持2.4GHz频段
3. 检查WiFi信号强度
4. 尝试重新配网

### 连接不稳定
1. 检查WiFi信号强度
2. 确认路由器设置正常
3. 使用串口命令查看状态：`wifi_status`

### 无法进入配网模式
1. 确认按钮操作正确
2. 检查串口连接
3. 尝试发送串口命令：`reset_wifi`

## 技术特性

- **自动保存**：WiFi配置自动保存到设备存储
- **断线重连**：网络断开时自动尝试重连
- **超时保护**：配网超时3分钟后自动重启
- **多种触发**：支持按钮、串口命令多种重置方式
- **状态监控**：实时监控网络状态和信号强度

## 注意事项

1. **WiFi频段**：仅支持2.4GHz WiFi网络
2. **配网超时**：配网页面3分钟无操作会自动重启
3. **密码安全**：WiFi密码会加密保存在设备中
4. **重启恢复**：配网过程中如遇问题，设备会自动重启恢复

## 更新记录

- 添加WiFiManager库支持
- 实现自动配网门户
- 添加多种重置方式
- 增强网络状态监控
- 优化用户体验和提示信息