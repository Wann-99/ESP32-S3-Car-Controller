# ESP32-S3 小车 Blinker App 控制说明

## 概述
本项目已集成 Blinker IoT 平台，可通过 Blinker 手机 App 远程控制 ESP32-S3 小车。

## 配置步骤

### 1. 获取 Blinker 设备密钥
1. 下载并安装 Blinker App（iOS/Android）
2. 注册账号并登录
3. 点击右上角"+"添加设备
4. 选择"独立设备" -> "WiFi接入"
5. 复制生成的设备密钥（Device Key）

### 2. 修改代码配置
在 `ESP32-S3_Car.ino` 文件中修改以下配置：

```cpp
// WiFi Configuration
const char* ssid = "your_wifi_name";        // 替换为您的WiFi名称
const char* password = "your_wifi_password"; // 替换为您的WiFi密码

// Blinker Configuration
const char* auth = "your_device_key";        // 替换为您的Blinker设备密钥
```

### 3. 安装 Blinker 库
在 Arduino IDE 中：
1. 打开 工具 -> 管理库
2. 搜索 "blinker"
3. 安装 "blinker-library" by 点灯科技

## 控制组件说明

### 按钮控件
- **btn-f**: 前进按钮
- **btn-b**: 后退按钮  
- **btn-l**: 左转按钮
- **btn-r**: 右转按钮
- **btn-s**: 停止按钮
- **btn-auto**: 自动模式按钮

### 滑块控件
- **slider-speed**: 速度控制滑块（20-100%）

### 数字显示控件
- **distance**: 超声波距离显示（cm）
- **speed**: 当前速度百分比显示

## App 界面配置

### 1. 添加控件
在 Blinker App 中点击设备进入控制界面，然后：
1. 点击右上角编辑按钮
2. 添加以下控件：

#### 按钮控件
- 添加 6 个按钮，分别设置键名为：btn-f, btn-b, btn-l, btn-r, btn-s, btn-auto
- 设置按钮文字：前进、后退、左转、右转、停止、自动

#### 滑块控件
- 添加滑块，键名设置为：slider-speed
- 设置范围：20-100
- 设置标题：速度控制

#### 数字显示控件
- 添加 2 个数字显示，键名分别为：distance, speed
- 设置标题：距离(cm), 速度(%)

### 2. 保存配置
配置完成后点击保存，退出编辑模式。

## 功能特性

### 实时数据显示
- 超声波距离传感器实时数据
- 电机速度百分比显示
- 自动数据更新（心跳机制）

### 安全功能
- 前进时自动避障检测
- 距离小于 10cm 时阻止前进
- 蜂鸣器警告提示

### 控制功能
- 远程方向控制（前进、后退、左转、右转）
- 实时速度调节
- 一键停止功能
- 自动模式（可扩展）

## 使用方法

1. 确保 ESP32-S3 和手机连接到同一 WiFi 网络
2. 上传代码到 ESP32-S3
3. 打开串口监视器查看连接状态
4. 在 Blinker App 中打开设备控制界面
5. 使用按钮和滑块控制小车

## 故障排除

### 连接问题
- 检查 WiFi 账号密码是否正确
- 确认设备密钥是否正确
- 查看串口输出的错误信息

### 控制问题
- 确认 App 中控件键名与代码中一致
- 检查网络连接是否稳定
- 重启设备和 App 重新连接

### 传感器问题
- 检查超声波传感器接线
- 确认引脚定义是否正确
- 查看串口输出的距离数据

## 扩展功能

可以根据需要添加更多控件：
- 舵机控制滑块
- LED 状态指示
- 温湿度传感器显示
- 摄像头图像传输（需额外配置）

## 注意事项

1. 请确保使用正确的 Blinker 设备密钥
2. WiFi 连接不稳定时可能影响控制响应
3. 建议在测试时先降低电机速度
4. 定期检查电池电量，低电量时性能会下降